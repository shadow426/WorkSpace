
定时器的内部时钟是指时钟来自于内部（APB1），与高速内部时钟的概念不一样

TI3和TI4没有接到边沿检测器，后面再说

![[Pasted image 20250406085719.png]]

TI1FP2和TI2FP1未来才会用到
![[Pasted image 20250406085841.png]]

TI1是输入通道
TI1_ED只能双边沿触发
极性选择：上升沿和下降沿互换
预分频器：ETR触发最快只能是内部时钟的1/4，可以降低速度
![[Pasted image 20250406090648.png]]


TIM2有ETR外部触发器
选择之后，ETR就直接作为定时器的时钟源
![[Pasted image 20250406091009.png]]

![[Pasted image 20250406091147.png]]

获得准确计数，定时器预分频器不分频
模式设置UP上升沿
自动重转载值默认65535
内部时钟分频：？没懂
自动重装载：disable
Clock设置：
滤波器,一般填最大值15，过滤的脉冲宽度与定时器频率相关，使定时器频率不要太高
极性，是否反转高低电平
分频，不分频

![[Pasted image 20250406091411.png]]


![[Pasted image 20250406092544.png]]

初始化：开始计数
HAL_TIM_Base_Start(&htim4);

while(1):
\_\_HAL_TIM_GET_COUNTER(&htim4);


开启中断
![[Pasted image 20250406092836.png]]



设置为从模式
选择触发为ETR1
![[Pasted image 20250406093154.png]]

代码无需改动，底层硬件改动
![[Pasted image 20250406093223.png]]



问题：执行中断回调函数时，计数器会增加吗